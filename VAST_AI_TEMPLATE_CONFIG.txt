==========================================
VAST.AI TEMPLATE CONFIGURATION
LLM RAG Multi-Tenant Platform
==========================================

Copy and paste these settings into your vast.ai template:

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. DOCKER IMAGE PATH
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
docker.io/vastai/kvm:@vastai-automatic-tag

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2. PORTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5000:5000
3000:3000
19530:19530
9091:9091

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3. DOCKER OPTIONS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
--shm-size=16g --gpus all -v /root:/workspace

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
4. ENVIRONMENT VARIABLES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DATABASE_URL=sqlite:///./instance/llm_rag.db
MILVUS_HOST=localhost
MILVUS_PORT=19530
VLLM_BASE_URL=http://localhost:8000
TRITON_BASE_URL=http://localhost:8001
ADAPTER_BASE_PATH=/workspace/LLM_RAG/LLM-Finetuner-main/adapters
BYPASS_LOGIN=true
FLASK_APP=app_new.py
PORT=5000
CUDA_AVAILABLE=true
GUNICORN_WORKERS=4
REACT_APP_API_HOST=http://localhost:5000
REACT_APP_BYPASS_LOGIN=true
REACT_APP_GOOGLE_CLIENT_ID=
NODE_ENV=production

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5. ON-START SCRIPT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Copy the entire contents of vast_ai_onstart.sh from the repository root.

Or use this inline version:

#!/bin/bash
set -e
echo "ðŸš€ LLM RAG Platform - Auto Deployment"
export DEBIAN_FRONTEND=noninteractive
apt-get update -y
apt-get install -y python3 python3-pip python3-venv git curl wget build-essential docker.io docker-compose nodejs npm screen sqlite3 libpq-dev poppler-utils tesseract-ocr libtesseract-dev libgl1-mesa-glx libglib2.0-0
curl -fsSL https://deb.nodesource.com/setup_18.x | bash - && apt-get install -y nodejs
cd /root && git clone https://github.com/dragon-dev-01/LLM_RAG.git LLM_RAG || (cd LLM_RAG && git pull)
cd /root/LLM_RAG/LLM-Finetuner-main && docker-compose up -d
sleep 30
for i in {1..30}; do curl -f http://localhost:9091/healthz && break || sleep 2; done || true
cd /root/LLM_RAG/LLM-Finetuner-main && python3 -m venv venv && /root/LLM_RAG/LLM-Finetuner-main/venv/bin/pip install --upgrade pip setuptools wheel && /root/LLM_RAG/LLM-Finetuner-main/venv/bin/pip install -r requirements.txt gunicorn
mkdir -p /root/LLM_RAG/LLM-Finetuner-main/uploads /root/LLM_RAG/LLM-Finetuner-main/adapters /root/LLM_RAG/LLM-Finetuner-main/logs /root/LLM_RAG/LLM-Finetuner-main/instance
export DATABASE_URL=sqlite:///./instance/llm_rag.db && export MILVUS_HOST=localhost && export MILVUS_PORT=19530 && export BYPASS_LOGIN=true && export FLASK_APP=app_new.py && export PORT=5000
cd /root/LLM_RAG/LLM-Finetuner-main && /root/LLM_RAG/LLM-Finetuner-main/venv/bin/python3 -m flask db upgrade || /root/LLM_RAG/LLM-Finetuner-main/venv/bin/python3 -c "from src import db, create_app; app = create_app(); app.app_context().push(); db.create_all()"
cd /root/LLM_RAG/LLM-Finetuner-main && /root/LLM_RAG/LLM-Finetuner-main/venv/bin/python3 scripts/init_base_models.py || touch .base_models_initialized
cd /root/LLM_RAG/LLM-Finetuner-FE-main && npm install --legacy-peer-deps
cd /root/LLM_RAG/LLM-Finetuner-FE-main && echo "REACT_APP_API_HOST=http://localhost:5000" > .env && echo "REACT_APP_BYPASS_LOGIN=true" >> .env && echo "PORT=3000" >> .env
cd /root/LLM_RAG/LLM-Finetuner-main && screen -dmS backend bash -c "export DATABASE_URL=sqlite:///./instance/llm_rag.db && export MILVUS_HOST=localhost && export MILVUS_PORT=19530 && export BYPASS_LOGIN=true && export PORT=5000 && /root/LLM_RAG/LLM-Finetuner-main/venv/bin/gunicorn -w 4 -b 0.0.0.0:5000 --timeout 300 app_new:app"
sleep 5
cd /root/LLM_RAG/LLM-Finetuner-FE-main && screen -dmS frontend bash -c "BROWSER=none npm start"
sleep 10
echo "âœ… Deployment Complete! Backend: http://localhost:5000 | Frontend: http://localhost:3000"
exec tail -f /dev/null

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
6. LAUNCH MODE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Command: (leave empty or use: /bin/bash)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
7. EXTRA FILTERS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
gpu_name:RTX 5090
gpu_name:RTX 5070 Ti
gpu_name:RTX 4090
gpu_name:RTX 4080
gpu_name:A100
gpu_name:A6000

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
8. DISK SPACE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Minimum: 50 GB
Recommended: 100 GB

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
9. ACCESS SETTINGS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Jupyter: (Optional - not required)
SSH: Enabled (Required for debugging)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
10. QUICK REFERENCE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

After instance starts:
  â€¢ Backend API:  http://<INSTANCE_IP>:5000
  â€¢ Frontend UI:  http://<INSTANCE_IP>:3000
  â€¢ Milvus Health: http://<INSTANCE_IP>:9091/healthz

View logs:
  â€¢ SSH into instance
  â€¢ screen -r backend  (backend logs)
  â€¢ screen -r frontend (frontend logs)

Test API:
  curl http://<INSTANCE_IP>:5000/api/base-models

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
NOTES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. The On-start script automatically:
   - Installs all dependencies
   - Clones the repository
   - Starts MilvusDB
   - Initializes the database
   - Starts backend and frontend

2. First startup takes 5-10 minutes for:
   - System package installation
   - Python/Node dependencies
   - MilvusDB initialization

3. Services run in screen sessions:
   - Backend: screen -r backend
   - Frontend: screen -r frontend

4. Bypass login is enabled by default for testing.
   To use Google OAuth, set BYPASS_LOGIN=false and
   provide REACT_APP_GOOGLE_CLIENT_ID.

5. The script keeps running (tail -f /dev/null) as
   required by vast.ai to keep the instance active.

==========================================

